<div class="container">
  
  <h1 class="primary_title">PAIMENT PAR CARTE BANCAIRE</h1>
  <hr>
  <div class="row">
    <div class="col-12 col-md-6 offset-md-3">
      <div id="stripe">
        <%= form_tag clients_order_payments_path(@order) do %>
          <%=  %>
          <article>
            <label class="amount">
              <span>Montant : <%= number_to_currency_euro(@order.total) %></span>
            </label>
          </article>

          <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
            data-name="Commande N° <%= @order.id %>"
            data-email="<%= current_user.email %>"
            data-description="Paiment sécurisé avec Stripe"
            data-locale ="auto"
            data-amount="<%= @order.total_cents %>"
            data-currency="EUR">
          </script>

          <script>
            document.getElementsByClassName("stripe-button-el")[0].style.display = 'none';
          </script>
          <%= submit_tag "Paiment sécurisé", class: "btn btn-main" %>
        <% end %>

        <script>
          btn = document.getElementsTagName("button")[0];
          btn.style.backgroundImage = "none!important";
          btn.style.backgroundColor = "#111!important";
          btn.style.borderRadius = "50px!important";
          btn.style.padding =  "10px 15px!important";
        </script>
      </div>
    </div>
  </div>
</div>

<style>
  #stripe {
    margin-top: 20%;
    border: 1px solid #111;
    padding-left: 33%;
    padding-top: 5%;
    padding-bottom: 5%;
    border-radius: 50px;
  }
</style>